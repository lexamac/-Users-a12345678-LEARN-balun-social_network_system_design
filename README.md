# Система управлением проектами типа Jira/Trello


## Функциональные требования:
- создание постов(фотографии, описание и геолокация);
- оставлять оценку поста(лайк/дизлайк);
- оставлять комментарии под постами;
- иметь ленты с постами;
- подписываться на авторов постов(получать обновления в ленту);
- иметь возможность осуществлять поиск популярных мест для путешествий(просмотр постов);
- просматривать посты. связанных с каким-то местом;
- иметь возможность просмотривать ленты других пользователей(в обратном хронологическом порядке);


## Нефункциональные требования:
- dau 10,000,000;
- для стран СНГ(один язык);
- хранить данные все время;

### Активность пользователя:
- ~3 поста в месяц создает/редактирует;
- ~100 просмотров постов в месяц;
- ~40 оставляет лайков/дизлайков под постом в месяц;
- ~15 оставляет комментариев под постом в месяц;
- ~5 подписывается на авторов постов в месяц;
- ~5 разных поисковых запроса в месяц;
- пиковая активность в предпраздничные дни и сезонные отпуска ~25%;

### Лимиты:
- ограничение по размеру медиа файлов 5Мб;
- не более 10 медиа файлов к посту;
- загружать за < 3 секунды(со стороны сервера);
- до 10 постов в день;
- до 20 комментариев в день;
- выдывать резльтат поиска до 5 секунд;
- 500 символов лимит на комментарий;
- 150 символов лимит на заголовок поста;
- 5000 символов лимит на описание поста;


## Модели данных:

**Пост** = 20,648 bytes:
- id (8 bytes)
- title (600 bytes)
- description (20000 bytes)
- location (16 bytes)
- user_id (8 bytes)
- created_at (8 bytes)
- modified_at (8 bytes)

**Контент(Мета инфо)** = 56 bytes:
- id (8 bytes)
- post_id (8 bytes)
- user_id (8 bytes)
- uri (16 bytes)
- created_at (8 bytes)
- modified_at (8 bytes)

**Реакция** = 48 bytes:
- id (8 bytes)
- user_id (8 bytes)
- post_id (8 bytes)
- comment_id (8 bytes)
- type (8 bytes)
- created_at (8 bytes)

**Комментарий** = 2,040 bytes:
- id (8 bytes)
- text (2000 bytes)
- post_id (8 bytes)
- user_id (8 bytes)
- created_at (8 bytes)
- modified_at (8 bytes)


## Нагрузка по подсистемам:

**Посты**
RPS Write = 10,000,000 * 0,1 / 86 400 = 12
RPS Read = 10,000,000 * 3.33 / 86 400 = 385

Write Traffic = 12 * 20,928 Байт = 251,136 КБ/с
Read Traffic = 385 * 33,448 Байт = 12,877,480 Кб/с

**Комеентарии**
RPS Write = 10,000,000 * 0.5 / 86 400 = 58
RPS Read = 10,000,000 * 3.33 / 86 400 = 385

Write Traffic = 58 * 2,040 Байт = 118,784 КБ/с
Read Traffic = 385 * 2,040 Байт = 785,480 Кб/с

**Реакции**
RPS Write = 10,000,000 * 64 / 86 400 = 7,407
RPS Read = 10,000,000 * 160 / 86 400 = 18,981

Write Traffic = 7,407 * 48 Байт = 355,536 КБ/с
Read Traffic = 18,981 * 48 Байт = 911,088 Кб/с
